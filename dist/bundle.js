(()=>{"use strict";function e(t){var a;if(null==t||!1===t)return document.createTextNode("");if("string"==typeof t||"number"==typeof t||!0===t)return document.createTextNode(t);if(Array.isArray(t)){var n=document.createDocumentFragment();return t.forEach((function(t){var a=e(t);n.appendChild(a)})),n}var i=document.createElement(t.tag);t.cls&&(a=i.classList).add.apply(a,[].concat(t.cls).filter(Boolean)),t.attrs&&Object.keys(t.attrs).forEach((function(e){i.setAttribute(e,t.attrs[e])}));var r=e(t.content);return i.appendChild(r),i}var t={tag:"form",cls:"game_lvl",content:[{tag:"h4",cls:"game_lvl-title",content:"Выберите сложность"},{tag:"div",cls:"game_lvl-dif",content:[{tag:"div",cls:"game_lvl-inputs",content:[{tag:"label",cls:"game_lvl-label",attrs:{for:1},content:1},{tag:"input",cls:"game_lvl-input",attrs:{type:"radio",id:1,value:1,name:"lvl"}}]},{tag:"div",cls:"game_lvl-inputs",content:[{tag:"label",cls:"game_lvl-label",attrs:{for:2},content:2},{tag:"input",cls:"game_lvl-input",attrs:{type:"radio",id:2,value:2,name:"lvl"}}]},{tag:"div",cls:"game_lvl-inputs",content:[{tag:"label",cls:"game_lvl-label",attrs:{for:3},content:3},{tag:"input",cls:"game_lvl-input",attrs:{type:"radio",id:3,value:3,name:"lvl"}}]}]},{tag:"button",cls:"game_lvl-btn",content:"Старт"}]};document.querySelector(".game_timer-minnum"),document.querySelector(".game_timer-seknum"),document.querySelector(".game_lvl-btn");var a=0,n=0,i=0;function r(){a=Math.floor((Date.now()-n)/1e3),2!==String(i).length&&i<10&&String(i).length<3&&(i="0"+i),60===a&&(n=Date.now(),(i+=1)<10&&(i="0"+i)),a<10&&(a="0"+a);var e=document.querySelector(".game_timer-minnum"),t=document.querySelector(".game_timer-seknum");e&&"Loose"!==window.application.status&&"Win"!==window.application.status&&(e.innerHTML=String(i),t.innerHTML=String(a),window.application.timers=i+"."+a)}document.querySelectorAll(".game_field-card"),document.querySelector(".result");var l,c,d=!1,o=!1;function s(){if(!o&&this!==l){if(this.classList.add("flip"),!d)return d=!0,void(l=this);var e,t;c=this,l.dataset.game===c.dataset.game?(l.removeEventListener("click",s),c.removeEventListener("click",s),d=(e=[!1,!1])[0],o=e[1],l=(t=[null,null])[0],c=t[1]):function(){o=!0,window.application.status="Loose",window.application.lvl=[],window.application.timerTest.timerId=0,console.log("going to the loose screen");var e=document.querySelector(".result");window.application.screens.looseScreen(e)}()}}function m(){if(document.querySelector(".game_field")){var e=document.querySelectorAll(".game_field-card"),t=e.length,a=0;if(e.forEach((function(e){e.classList.contains("flip")&&a++})),t===a){window.application.status="Win",window.application.lvl=[],console.log("go to win page");var n=document.querySelector(".result");window.application.screens.winScreen(n),clearInterval(window.application.timerWin.timeout)}}}document.querySelectorAll(".game_field-card");var u={img:"./cards/cardBack.jpg",data:"back"},p=[];p.push({img:"./cards/one.jpg",data:"one"}),p.push({img:"./cards/2.jpg",data:"two"}),p.push({img:"./cards/3.jpg",data:"three"});var v=[];v.push({img:"./cards/one.jpg",data:"one"}),v.push({img:"./cards/2.jpg",data:"two"}),v.push({img:"./cards/3.jpg",data:"three"}),v.push({img:"./cards/4.jpg",data:"four"}),v.push({img:"./cards/5.jpg",data:"five"}),v.push({img:"./cards/6.jpg",data:"six"});var g=[];function f(e){return{tag:"div",cls:"game_field-card",attrs:{"data-game":e.data},content:[{tag:"img",cls:"game_field-cardfront",attrs:{src:e.img}}]}}function h(e){return{tag:"img",cls:"game_field-cardback",attrs:{src:e.img}}}function w(){var e=document.querySelector(".game");window.application.screens.mainScreen(e);var t=document.querySelector(".game_lvl");document.querySelectorAll(".game_lvl-input"),t.addEventListener("submit",(function(a){a.preventDefault();var n=t.elements.lvl.value;console.log(t.elements.lvl.value),window.application.lvl=n,""===n?console.log("choose the lvl!"):window.application.screens.screenGame(e)}))}g.push({img:"./cards/one.jpg",data:"one"}),g.push({img:"./cards/2.jpg",data:"two"}),g.push({img:"./cards/3.jpg",data:"three"}),g.push({img:"./cards/4.jpg",data:"four"}),g.push({img:"./cards/5.jpg",data:"five"}),g.push({img:"./cards/6.jpg",data:"six"}),g.push({img:"./cards/7.jpg",data:"seven"}),g.push({img:"./cards/8.jpg",data:"eight"}),g.push({img:"./cards/9.jpg",data:"nine"});var _=document.querySelector(".game");window.application={status:{},screens:{},lvl:[],renderScreen:function(e){window.application.timers.forEach((function(e){clearInterval(e)})),window.application.screens[e]?(_.innerHTML="",this.screens[e]):console.warn("Такой страницы нет")},timers:[],timerWin:[],timerTest:[]},window.application.screens.mainScreen=function(a){a.innerHTML="",document.querySelector(".result").style.zIndex="-1",a.appendChild(e(t))},window.application.screens.gameStart=w,w(),window.application.screens.screenGame=function(t){t.innerHTML="";var a=document.createElement("div");a.classList.add("game_playscreen"),t.appendChild(a);var l=document.createElement("div");l.classList.add("game_header"),a.appendChild(l);var c=document.createElement("div");c.classList.add("game_field"),a.appendChild(c);var d=document.createElement("div");d.classList.add("game_timer"),l.appendChild(d);var o=document.createElement("div");o.classList.add("game_timer-min"),d.appendChild(o);var w=document.createElement("div");w.classList.add("game_timer-text"),o.appendChild(w),w.textContent="min";var _=document.createElement("div");_.classList.add("game_timer-minnum"),o.appendChild(_),_.textContent="00";var C=document.createElement("div");C.classList.add("game_timer-comma"),d.appendChild(C),C.textContent=".";var L=document.createElement("div");L.classList.add("game_timer-sek"),d.appendChild(L);var y=document.createElement("div");y.classList.add("game_timer-text"),L.appendChild(y),y.textContent="sek";var E=document.createElement("div");E.classList.add("game_timer-seknum"),L.appendChild(E),E.textContent="00";var S=document.createElement("button");if(S.classList.add("game_lvl-btn"),l.appendChild(S),S.textContent="Начать заново","1"===window.application.lvl){for(var q=0;q<2;q++)c.appendChild(e(p.map(f)));document.querySelectorAll(".game_field-card").forEach((function(t){t.appendChild(e(h(u)))}))}else if("2"===window.application.lvl){for(q=0;q<2;q++)c.appendChild(e(v.map(f)));document.querySelectorAll(".game_field-card").forEach((function(t){t.appendChild(e(h(u)))}))}else{for(q=0;q<2;q++)c.appendChild(e(g.map(f)));document.querySelectorAll(".game_field-card").forEach((function(t){t.appendChild(e(h(u)))}))}document.querySelectorAll(".game_field-card"),function(){var e=document.querySelectorAll(".game_field-card");document.querySelector(".result"),function(e){clearInterval(window.application.timerWin.timeout);var t=document.querySelectorAll(".game_field-card");document.querySelector(".result"),t.forEach((function(e){e.classList.add("flip")})),setTimeout((function(){t.forEach((function(e){e.classList.remove("flip")}));var a=setInterval(e,1e3);window.application.timerWin.timeout=a,function(){n=Date.now(),i=0;var e=window.setInterval(r);window.application.timerTest.timerId=e}()}),5e3)}(m),document.querySelector(".game_timer-minnum"),document.querySelector(".game_timer-seknum");var t=document.querySelector(".game_lvl-btn");e.forEach((function(e){return e.addEventListener("click",s)})),t.addEventListener("click",(function(){var e=0,t=document.querySelector(".game");window.application.timers=e+".0",window.application.timerTest.timerId.forEach((function(e){clearInterval(e)})),Date.now(),e=0,setInterval(r),clearInterval(window.application.timerWin.timeout),window.application.screens.screenGame(t)}))}()},window.application.screens.looseScreen=function(e){e.style.zIndex="2";var t=document.createElement("div");e.appendChild(t),t.classList.add("result_field");var a=document.createElement("div");t.appendChild(a),a.classList.add("result_frame");var n=document.createElement("div");a.appendChild(n),n.classList.add("result_frame-loose");var i=document.createElement("img");n.appendChild(i),i.classList.add("result_frame-img"),i.src="./cards/paimonangry.png";var l=document.createElement("h4");n.appendChild(l),l.classList.add("result_frame-youloose"),l.textContent="Вы проиграли!";var c=document.createElement("div");a.appendChild(c),c.classList.add("result_frame-time");var d=document.createElement("h5");c.appendChild(d),d.classList.add("result_frame-timetxt"),d.textContent="Затраченное время:";var o=document.createElement("h3");c.appendChild(o),d.classList.add("result_frame-timenum"),d.textContent=window.application.timers;var s=document.createElement("button");a.appendChild(s),s.classList.add("result_frame-btn"),s.textContent="Играть снова",s.addEventListener("click",(function(){var e=document.querySelector(".game"),t=document.querySelector(".result");window.clearInterval(r),window.application.status={},window.application.lvl=[],window.application.timers=[],window.application.timerWin=[],window.application.timerTest=[],t.innerHTML="",e.innerHTML="",window.application.screens.mainScreen(e),w()}))},window.application.screens.winScreen=function(e){e.style.zIndex="2";var t=document.createElement("div");e.appendChild(t),t.classList.add("result_field");var a=document.createElement("div");t.appendChild(a),a.classList.add("result_frame");var n=document.createElement("div");a.appendChild(n),n.classList.add("result_frame-win");var i=document.createElement("img");n.appendChild(i),i.classList.add("result_frame-img"),i.src="./cards/paimonhappy.png";var r=document.createElement("h4");n.appendChild(r),r.classList.add("result_frame-youwin"),r.textContent="Вы выиграли!";var l=document.createElement("div");a.appendChild(l),l.classList.add("result_frame-time");var c=document.createElement("h5");l.appendChild(c),c.classList.add("result_frame-timetxt"),c.textContent="Затраченное время:";var d=document.createElement("h3");l.appendChild(d),d.classList.add("result_frame-timenum");var o=document.createElement("button");a.appendChild(o),o.classList.add("result_frame-btn"),o.textContent="Играть снова",o.addEventListener("click",(function(){document.querySelector(".game"),document.querySelector(".result").innerHTML=""}))}})();