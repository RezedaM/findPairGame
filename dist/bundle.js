(()=>{"use strict";function e(t){if(null==t||!1===t)return document.createTextNode("");if("string"==typeof t||"number"==typeof t||!0===t)return document.createTextNode(t);if(Array.isArray(t)){const n=document.createDocumentFragment();return t.forEach((t=>{const a=e(t);n.appendChild(a)})),n}const n=document.createElement(t.tag);t.cls&&n.classList.add(...[].concat(t.cls).filter(Boolean)),t.attrs&&Object.keys(t.attrs).forEach((e=>{n.setAttribute(e,t.attrs[e])}));const a=e(t.content);return n.appendChild(a),n}let t={tag:"form",cls:"game_lvl",content:[{tag:"h4",cls:"game_lvl-title",content:"Выберите сложность"},{tag:"div",cls:"game_lvl-dif",content:[{tag:"div",cls:"game_lvl-inputs",content:[{tag:"label",cls:"game_lvl-label",attrs:{for:1},content:1},{tag:"input",cls:"game_lvl-input",attrs:{type:"radio",id:1,value:1,name:"lvl"}}]},{tag:"div",cls:"game_lvl-inputs",content:[{tag:"label",cls:"game_lvl-label",attrs:{for:2},content:2},{tag:"input",cls:"game_lvl-input",attrs:{type:"radio",id:2,value:2,name:"lvl"}}]},{tag:"div",cls:"game_lvl-inputs",content:[{tag:"label",cls:"game_lvl-label",attrs:{for:3},content:3},{tag:"input",cls:"game_lvl-input",attrs:{type:"radio",id:3,value:3,name:"lvl"}}]}]},{tag:"button",cls:"game_lvl-btn",content:"Старт"}]},n={img:"./cards/cardBack.jpg",data:"back"},a=[{img:"./cards/one.jpg",data:"one"},{img:"./cards/2.jpg",data:"two"},{img:"./cards/3.jpg",data:"three"}],c=[{img:"./cards/one.jpg",data:"one"},{img:"./cards/2.jpg",data:"two"},{img:"./cards/3.jpg",data:"three"},{img:"./cards/4.jpg",data:"four"},{img:"./cards/5.jpg",data:"five"},{img:"./cards/6.jpg",data:"six"}],l=[{img:"./cards/one.jpg",data:"one"},{img:"./cards/2.jpg",data:"two"},{img:"./cards/3.jpg",data:"three"},{img:"./cards/4.jpg",data:"four"},{img:"./cards/5.jpg",data:"five"},{img:"./cards/6.jpg",data:"six"},{img:"./cards/7.jpg",data:"seven"},{img:"./cards/8.jpg",data:"eight"},{img:"./cards/9.jpg",data:"nine"}];function i(e){return{tag:"div",cls:"game_field-card",attrs:{"data-game":e.data},content:[{tag:"img",cls:"game_field-cardfront",attrs:{src:e.img}}]}}function d(e){return{tag:"img",cls:"game_field-cardback",attrs:{src:e.img}}}function s(){if(document.querySelector(".game_field")){let e=document.querySelectorAll(".game_field-card"),t=e.length,n=0;if(e.forEach((e=>{e.classList.contains("flip")&&n++})),t===n){window.application.status="Win",console.log("go to win page");const e=document.querySelector(".result");window.application.screens.winScreen(e),clearInterval(window.application.timerWin.timeout)}}}function o(){const e=document.querySelector(".game");window.application.screens.mainScreen(e);const t=document.querySelector(".game_lvl");document.querySelectorAll(".game_lvl-input"),t.addEventListener("submit",(n=>{n.preventDefault();let a=t.elements.lvl.value;console.log(t.elements.lvl.value),window.application.lvl=a,""===a?console.log("choose the lvl!"):window.application.screens.screenGame(e)}))}const r=document.querySelector(".game");window.application={status:{},screens:{},lvl:[],renderScreen:function(e){window.application.timers.forEach((e=>{clearInterval(e)})),window.application.screens[e]?(r.innerHTML="",this.screens[e]):console.warn("Такой страницы нет")},timers:[],timerWin:[]},window.application.screens.mainScreen=function(n){n.innerHTML="",document.querySelector(".result").style.zIndex="-1",n.appendChild(e(t))},window.application.screens.gameStart=o,o(),window.application.screens.screenGame=function(t){t.innerHTML="";const o=document.createElement("div");o.classList.add("game_playscreen"),t.appendChild(o);const r=document.createElement("div");r.classList.add("game_header"),o.appendChild(r);const m=document.createElement("div");m.classList.add("game_field"),o.appendChild(m);const p=document.createElement("div");p.classList.add("game_timer"),r.appendChild(p);const u=document.createElement("div");u.classList.add("game_timer-min"),p.appendChild(u);const g=document.createElement("div");g.classList.add("game_timer-text"),u.appendChild(g),g.textContent="min";const f=document.createElement("div");f.classList.add("game_timer-minnum"),u.appendChild(f),f.textContent="00";const v=document.createElement("div");v.classList.add("game_timer-comma"),p.appendChild(v),v.textContent=".";const h=document.createElement("div");h.classList.add("game_timer-sek"),p.appendChild(h);const w=document.createElement("div");w.classList.add("game_timer-text"),h.appendChild(w),w.textContent="sek";const _=document.createElement("div");_.classList.add("game_timer-seknum"),h.appendChild(_),_.textContent="00";const C=document.createElement("button");if(C.classList.add("game_lvl-btn"),r.appendChild(C),C.textContent="Начать заново","1"===window.application.lvl){for(let t=0;t<2;t++)m.appendChild(e(a.map(i)));document.querySelectorAll(".game_field-card").forEach((t=>{t.appendChild(e(d(n)))}))}else if("2"===window.application.lvl){for(let t=0;t<2;t++)m.appendChild(e(c.map(i)));document.querySelectorAll(".game_field-card").forEach((t=>{t.appendChild(e(d(n)))}))}else{for(let t=0;t<2;t++)m.appendChild(e(l.map(i)));document.querySelectorAll(".game_field-card").forEach((t=>{t.appendChild(e(d(n)))}))}const L=document.querySelectorAll(".game_field-card");var E;function y(){if(!b&&this!==S){if(this.classList.add("flip"),!q)return q=!0,void(S=this);x=this,S.dataset.game===x.dataset.game?(S.removeEventListener("click",y),x.removeEventListener("click",y),[q,b]=[!1,!1],[S,x]=[null,null]):function(){b=!0,window.application.status="Loose",console.log("going to the loose screen");const e=document.querySelector(".result");window.application.screens.looseScreen(e)}()}}document.querySelector(".result"),E=s,L.forEach((e=>{e.classList.add("flip")})),setTimeout((()=>{L.forEach((e=>{e.classList.remove("flip")}));let e=setInterval(E,1e3);window.application.timerWin.timeout=e,W()}),5e3),L.forEach((e=>{let t=Math.floor(18*Math.random());e.style.order=t})),L.forEach((e=>e.addEventListener("click",y)));let S,x,q=!1,b=!1;const j=document.querySelector(".game_timer-minnum"),k=document.querySelector(".game_timer-seknum"),I=document.querySelector(".game_lvl-btn");let M=0,T=0,A=0,H=0;function D(){T=Math.floor((Date.now()-A)/1e3),2!==H.length&&H<10&&(H="0"+H),60===T&&(A=Date.now(),H++,H<10&&(console.log(H),H="0"+H)),T<10&&(T="0"+T),j.innerHTML=H,k.innerHTML=T,window.application.timers=H+"."+T}let W=function(){A=Date.now(),H=0,M=setInterval(D)};I.addEventListener("click",(()=>{let e=document.querySelector(".game");window.application.timers=H+"."+T,M=clearInterval(D),A=Date.now(),H=0,M=setInterval(D),clearInterval(window.application.timerWin.timeout),window.application.screens.screenGame(e)}))},window.application.screens.looseScreen=function(e){e.style.zIndex="2";const t=document.createElement("div");e.appendChild(t),t.classList.add("result_field");const n=document.createElement("div");t.appendChild(n),n.classList.add("result_frame");const a=document.createElement("div");n.appendChild(a),a.classList.add("result_frame-loose");const c=document.createElement("img");a.appendChild(c),c.classList.add("result_frame-img"),c.src="./cards/paimonangry.png";const l=document.createElement("h4");a.appendChild(l),l.classList.add("result_frame-youloose"),l.textContent="Вы проиграли!";const i=document.createElement("div");n.appendChild(i),i.classList.add("result_frame-time");const d=document.createElement("h5");i.appendChild(d),d.classList.add("result_frame-timetxt"),d.textContent="Затраченное время:";const s=document.createElement("h3");i.appendChild(s),d.classList.add("result_frame-timenum"),d.textContent=window.application.timers;const o=document.createElement("button");n.appendChild(o),o.classList.add("result_frame-btn"),o.textContent="Играть снова",o.addEventListener("click",(()=>{let e=document.querySelector(".game");document.querySelector(".result").innerHTML="",window.application.screens.mainScreen(e)}))},window.application.screens.winScreen=function(e){e.style.zIndex="2";const t=document.createElement("div");e.appendChild(t),t.classList.add("result_field");const n=document.createElement("div");t.appendChild(n),n.classList.add("result_frame");const a=document.createElement("div");n.appendChild(a),a.classList.add("result_frame-win");const c=document.createElement("img");a.appendChild(c),c.classList.add("result_frame-img"),c.src="./cards/paimonhappy.png";const l=document.createElement("h4");a.appendChild(l),l.classList.add("result_frame-youwin"),l.textContent="Вы выиграли!";const i=document.createElement("div");n.appendChild(i),i.classList.add("result_frame-time");const d=document.createElement("h5");i.appendChild(d),d.classList.add("result_frame-timetxt"),d.textContent="Затраченное время:";const s=document.createElement("h3");i.appendChild(s),s.classList.add("result_frame-timenum"),s.textContent=window.application.timers;const o=document.createElement("button");n.appendChild(o),o.classList.add("result_frame-btn"),o.textContent="Играть снова",o.addEventListener("click",(()=>{let e=document.querySelector(".game");document.querySelector(".result").innerHTML="",window.application.screens.mainScreen(e)}))}})();