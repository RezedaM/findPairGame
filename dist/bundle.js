(()=>{"use strict";function e(t){var a;if(null==t||!1===t)return document.createTextNode("");if("string"==typeof t||"number"==typeof t||!0===t)return document.createTextNode(t);if(Array.isArray(t)){var n=document.createDocumentFragment();return t.forEach((function(t){var a=e(t);n.appendChild(a)})),n}var i=document.createElement(t.tag);t.cls&&(a=i.classList).add.apply(a,[].concat(t.cls).filter(Boolean)),t.attrs&&Object.keys(t.attrs).forEach((function(e){i.setAttribute(e,t.attrs[e])}));var r=e(t.content);return i.appendChild(r),i}var t={tag:"form",cls:"game_lvl",content:[{tag:"h4",cls:"game_lvl-title",content:"Выберите сложность"},{tag:"div",cls:"game_lvl-dif",content:[{tag:"div",cls:"game_lvl-inputs",content:[{tag:"label",cls:"game_lvl-label",attrs:{for:1},content:1},{tag:"input",cls:"game_lvl-input",attrs:{type:"radio",id:1,value:1,name:"lvl"}}]},{tag:"div",cls:"game_lvl-inputs",content:[{tag:"label",cls:"game_lvl-label",attrs:{for:2},content:2},{tag:"input",cls:"game_lvl-input",attrs:{type:"radio",id:2,value:2,name:"lvl"}}]},{tag:"div",cls:"game_lvl-inputs",content:[{tag:"label",cls:"game_lvl-label",attrs:{for:3},content:3},{tag:"input",cls:"game_lvl-input",attrs:{type:"radio",id:3,value:3,name:"lvl"}}]}]},{tag:"button",cls:"game_lvl-btn",content:"Старт"}]},a={img:"./cards/cardBack.jpg",data:"back"},n=[];n.push({img:"./cards/one.jpg",data:"one"}),n.push({img:"./cards/2.jpg",data:"two"}),n.push({img:"./cards/3.jpg",data:"three"});var i=[];i.push({img:"./cards/one.jpg",data:"one"}),i.push({img:"./cards/2.jpg",data:"two"}),i.push({img:"./cards/3.jpg",data:"three"}),i.push({img:"./cards/4.jpg",data:"four"}),i.push({img:"./cards/5.jpg",data:"five"}),i.push({img:"./cards/6.jpg",data:"six"});var r=[];function l(e){return{tag:"div",cls:"game_field-card",attrs:{"data-game":e.data},content:[{tag:"img",cls:"game_field-cardfront",attrs:{src:e.img}}]}}function d(e){return{tag:"img",cls:"game_field-cardback",attrs:{src:e.img}}}function c(){if(document.querySelector(".game_field")){var e=document.querySelectorAll(".game_field-card"),t=e.length,a=0;if(e.forEach((function(e){e.classList.contains("flip")&&a++})),t===a){window.application.status="Win",window.application.lvl=[],console.log("go to win page");var n=document.querySelector(".result");window.application.screens.winScreen(n),clearInterval(window.application.timerWin.timeout)}}}function s(){var e=document.querySelector(".game");window.application.screens.mainScreen(e);var t=document.querySelector(".game_lvl");document.querySelectorAll(".game_lvl-input"),t.addEventListener("submit",(function(a){a.preventDefault();var n=t.elements.lvl.value;console.log(t.elements.lvl.value),window.application.lvl=n,""===n?console.log("choose the lvl!"):window.application.screens.screenGame(e)}))}r.push({img:"./cards/one.jpg",data:"one"}),r.push({img:"./cards/2.jpg",data:"two"}),r.push({img:"./cards/3.jpg",data:"three"}),r.push({img:"./cards/4.jpg",data:"four"}),r.push({img:"./cards/5.jpg",data:"five"}),r.push({img:"./cards/6.jpg",data:"six"}),r.push({img:"./cards/7.jpg",data:"seven"}),r.push({img:"./cards/8.jpg",data:"eight"}),r.push({img:"./cards/9.jpg",data:"nine"});var o=document.querySelector(".game");window.application={status:{},screens:{},lvl:[],renderScreen:function(e){window.application.timers.forEach((function(e){clearInterval(e)})),window.application.screens[e]?(o.innerHTML="",this.screens[e]):console.warn("Такой страницы нет")},timers:[],timerWin:[]},window.application.screens.mainScreen=function(a){a.innerHTML="",document.querySelector(".result").style.zIndex="-1",a.appendChild(e(t))},window.application.screens.gameStart=s,s(),window.application.screens.screenGame=function(t){t.innerHTML="";var s=document.createElement("div");s.classList.add("game_playscreen"),t.appendChild(s);var o=document.createElement("div");o.classList.add("game_header"),s.appendChild(o);var m=document.createElement("div");m.classList.add("game_field"),s.appendChild(m);var u=document.createElement("div");u.classList.add("game_timer"),o.appendChild(u);var p=document.createElement("div");p.classList.add("game_timer-min"),u.appendChild(p);var v=document.createElement("div");v.classList.add("game_timer-text"),p.appendChild(v),v.textContent="min";var g=document.createElement("div");g.classList.add("game_timer-minnum"),p.appendChild(g),g.textContent="00";var f=document.createElement("div");f.classList.add("game_timer-comma"),u.appendChild(f),f.textContent=".";var h=document.createElement("div");h.classList.add("game_timer-sek"),u.appendChild(h);var w=document.createElement("div");w.classList.add("game_timer-text"),h.appendChild(w),w.textContent="sek";var _=document.createElement("div");_.classList.add("game_timer-seknum"),h.appendChild(_),_.textContent="00";var C=document.createElement("button");if(C.classList.add("game_lvl-btn"),o.appendChild(C),C.textContent="Начать заново","1"===window.application.lvl){for(var L=0;L<2;L++)m.appendChild(e(n.map(l)));document.querySelectorAll(".game_field-card").forEach((function(t){t.appendChild(e(d(a)))}))}else if("2"===window.application.lvl){for(L=0;L<2;L++)m.appendChild(e(i.map(l)));document.querySelectorAll(".game_field-card").forEach((function(t){t.appendChild(e(d(a)))}))}else{for(L=0;L<2;L++)m.appendChild(e(r.map(l)));document.querySelectorAll(".game_field-card").forEach((function(t){t.appendChild(e(d(a)))}))}var E,y=document.querySelectorAll(".game_field-card");function S(){if(!j&&this!==x){if(this.classList.add("flip"),!b)return b=!0,void(x=this);var e,t;q=this,x.dataset.game===q.dataset.game?(x.removeEventListener("click",S),q.removeEventListener("click",S),b=(e=[!1,!1])[0],j=e[1],x=(t=[null,null])[0],q=t[1]):function(){j=!0,window.application.status="Loose",window.application.lvl=[],console.log("going to the loose screen");var e=document.querySelector(".result");window.application.screens.looseScreen(e)}()}}document.querySelector(".result"),E=c,y.forEach((function(e){e.classList.add("flip")})),setTimeout((function(){y.forEach((function(e){e.classList.remove("flip")}));var e=setInterval(E,1e3);window.application.timerWin.timeout=e,W()}),5e3),y.forEach((function(e){var t=Math.floor(18*Math.random());e.style.order=t})),y.forEach((function(e){return e.addEventListener("click",S)}));var x,q,b=!1,j=!1,k=document.querySelector(".game_timer-minnum"),I=document.querySelector(".game_timer-seknum"),M=document.querySelector(".game_lvl-btn"),T=0,A=0,H=0;function D(){T=Math.floor((Date.now()-A)/1e3),2!==String(H).length&&H<10&&(H="0"+H),60===T&&(A=Date.now(),++H<10&&(H="0"+H)),T<10&&(T="0"+T),k.innerHTML=String(H),I.innerHTML=String(T),window.application.timers=H+"."+T}var W=function(){A=Date.now(),H=0,window.setInterval(D)};M.addEventListener("click",(function(){var e=document.querySelector(".game");window.application.timers=H+"."+T,window.clearInterval(D),A=Date.now(),H=0,setInterval(D),clearInterval(window.application.timerWin.timeout),window.application.screens.screenGame(e)}))},window.application.screens.looseScreen=function(e){e.style.zIndex="2";var t=document.createElement("div");e.appendChild(t),t.classList.add("result_field");var a=document.createElement("div");t.appendChild(a),a.classList.add("result_frame");var n=document.createElement("div");a.appendChild(n),n.classList.add("result_frame-loose");var i=document.createElement("img");n.appendChild(i),i.classList.add("result_frame-img"),i.src="./cards/paimonangry.png";var r=document.createElement("h4");n.appendChild(r),r.classList.add("result_frame-youloose"),r.textContent="Вы проиграли!";var l=document.createElement("div");a.appendChild(l),l.classList.add("result_frame-time");var d=document.createElement("h5");l.appendChild(d),d.classList.add("result_frame-timetxt"),d.textContent="Затраченное время:";var c=document.createElement("h3");l.appendChild(c),d.classList.add("result_frame-timenum"),d.textContent=window.application.timers;var s=document.createElement("button");a.appendChild(s),s.classList.add("result_frame-btn"),s.textContent="Играть снова",s.addEventListener("click",(function(){var e=document.querySelector(".game");document.querySelector(".result").innerHTML="",window.application.screens.mainScreen(e)}))},window.application.screens.winScreen=function(e){e.style.zIndex="2";var t=document.createElement("div");e.appendChild(t),t.classList.add("result_field");var a=document.createElement("div");t.appendChild(a),a.classList.add("result_frame");var n=document.createElement("div");a.appendChild(n),n.classList.add("result_frame-win");var i=document.createElement("img");n.appendChild(i),i.classList.add("result_frame-img"),i.src="./cards/paimonhappy.png";var r=document.createElement("h4");n.appendChild(r),r.classList.add("result_frame-youwin"),r.textContent="Вы выиграли!";var l=document.createElement("div");a.appendChild(l),l.classList.add("result_frame-time");var d=document.createElement("h5");l.appendChild(d),d.classList.add("result_frame-timetxt"),d.textContent="Затраченное время:";var c=document.createElement("h3");l.appendChild(c),c.classList.add("result_frame-timenum");var s=document.createElement("button");a.appendChild(s),s.classList.add("result_frame-btn"),s.textContent="Играть снова",s.addEventListener("click",(function(){document.querySelector(".game"),document.querySelector(".result").innerHTML=""}))}})();